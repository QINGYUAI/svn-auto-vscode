# SVN/Git 自动提交插件 - 用户指南

## 📖 目录
- [插件简介](#插件简介)
- [安装方法](#安装方法)
- [快速开始](#快速开始)
- [基本功能](#基本功能)
- [高级配置](#高级配置)
- [使用示例](#使用示例)
- [故障排除](#故障排除)
- [常见问题](#常见问题)

## 🚀 插件简介

SVN/Git 自动提交插件是一个为 VSCode 开发的版本控制自动化工具，旨在简化代码提交流程，提高开发效率。

### 主要特性
- ✅ **双版本控制系统支持**：同时支持 SVN 和 Git
- ✅ **智能自动检测**：自动识别项目使用的版本控制系统
- ✅ **上下文感知提交**：根据当前编辑器或选中文件智能提交
- ✅ **自动提交信息生成**：根据文件类型和变更内容智能生成提交信息
- ✅ **自动提交功能**：监控文件变化，自动执行提交
- ✅ **提交信息模板**：支持自定义提交信息格式
- ✅ **冲突解决辅助**：提供简单的冲突解决选项
- ✅ **状态栏集成**：在 VSCode 状态栏显示快捷操作
- ✅ **丰富的配置选项**：满足不同项目和团队需求

## 📦 安装方法

### 方法一：VSCode 插件市场（推荐）
1. 打开 VSCode
2. 按 `Ctrl+Shift+X` 打开插件市场
3. 搜索 "SVN/Git 自动提交" 或 "QINGYUAI"
4. 点击安装

### 方法二：命令行安装
```bash
code --install-extension QINGYUAI.svn-git-auto-commit
```

### 方法三：VSIX 文件安装
1. 从 [GitHub Releases](https://github.com/QINGYUAI/svn-auto-vscode/releases) 下载最新的 VSIX 文件
2. 在 VSCode 中按 `Ctrl+Shift+P`
3. 输入 `Extensions: Install from VSIX...`
4. 选择下载的 VSIX 文件

### 方法四：开发模式安装（用于测试）
1. **克隆或下载项目**
   ```bash
   git clone <项目地址>
   cd svn-vscode
   ```

2. **安装依赖**
   ```bash
   npm install
   ```

3. **编译项目**
   ```bash
   npm run compile
   ```

4. **在 VSCode 中调试**
   - 在 VSCode 中打开项目文件夹
   - 按 `F5` 或使用命令面板 `Debug: Start Debugging`
   - 这会打开一个新的 VSCode 窗口来测试插件

## ⚡ 快速开始

### 🚀 5分钟快速上手

#### 1. 安装插件
```bash
# 进入项目目录
cd svn-vscode

# 安装依赖并编译
npm install && npm run compile

# 在 VSCode 中按 F5 启动调试模式
```

#### 2. 首次使用设置

安装插件后，插件会自动检测你的项目类型：

- 如果项目根目录有 `.git` 文件夹，识别为 Git 项目
- 如果项目根目录有 `.svn` 文件夹，识别为 SVN 项目
- 如果都没有，可以手动设置默认版本控制系统

#### 3. 基本配置

打开 VSCode 设置 (`Ctrl+,` 或 `Cmd+,`)，搜索 `svn-auto-commit`：

```json
{
  "svn-auto-commit.enabled": true,
  "svn-auto-commit.defaultVCS": "auto",
  "svn-auto-commit.showStatusBar": true,
  "svn-auto-commit.confirmBeforeCommit": true
}
```

#### 4. 状态栏说明

插件启用后，你会在 VSCode 底部状态栏看到：

| 图标 | 说明 | 点击操作 |
|------|------|----------|
| `$(source-control) SVN` 或 `$(git-branch) Git` | 当前版本控制系统 | 显示操作菜单 |
| `$(git-branch) 分支名` | 当前分支 | 显示分支信息 |
| `$(sync)` | 更新/拉取 | 执行更新操作 |
| `$(git-commit) [数字]` | 提交（显示变更文件数） | 执行提交操作 |
| `$(history)` | 历史记录 | 查看提交历史 |

### 基本使用

#### 提交代码
- **快捷键**: `Ctrl+Alt+V` (Mac: `Cmd+Alt+V`) - V for Version control
- **状态栏**: 点击 `$(git-commit)` 图标
- **编辑器标题栏**: 点击 `$(git-commit)` 图标
- **右键菜单**: 在文件/文件夹上右键选择 `$(git-commit) 提交更改`
- **命令面板**: `SVN/Git 自动提交: 提交更改`

#### 更新代码
- **快捷键**: `Ctrl+Alt+U` (Mac: `Cmd+Alt+U`) - U for Update
- **状态栏**: 点击 `$(sync)` 图标
- **编辑器标题栏**: 点击 `$(sync)` 图标
- **右键菜单**: 在文件/文件夹上右键选择 `$(sync) 更新/拉取`
- **命令面板**: `SVN/Git 自动提交: 更新/拉取`

#### 查看历史
- **快捷键**: `Ctrl+Alt+H` (Mac: `Cmd+Alt+H`) - H for History
- **状态栏**: 点击 `$(history)` 图标
- **编辑器标题栏**: 点击 `$(history)` 图标
- **右键菜单**: 在文件上右键选择 `$(history) 查看历史`
- **命令面板**: `SVN/Git 自动提交: 查看历史`

#### 显示菜单
- **快捷键**: `Ctrl+Alt+M` (Mac: `Cmd+Alt+M`) - M for Menu

### 常用配置

打开 VSCode 设置，搜索 `svn-auto-commit`：

```json
{
  // 基本设置
  "svn-auto-commit.enabled": true,
  "svn-auto-commit.showStatusBar": true,
  "svn-auto-commit.confirmBeforeCommit": true,
  
  // SVN 设置
  "svn-auto-commit.svn.username": "your_username",
  "svn-auto-commit.svn.autoUpdate": true,
  
  // Git 设置
  "svn-auto-commit.git.autoPull": true,
  "svn-auto-commit.git.autoPush": false,
  
  // 提交信息模板
  "svn-auto-commit.commit.template": "[修复] {message} - {username} ({date})"
}
```

### 自动提交（可选）

```json
{
  "svn-auto-commit.autoCommit.enabled": true,
  "svn-auto-commit.autoCommit.delay": 60,
  "svn-auto-commit.autoCommit.messageTemplate": "自动提交: {fileList} ({datetime})"
}
```

## 🎯 基本功能

### 1. 提交更改

#### 方法一：快捷键
- 按 `Ctrl+Alt+V` (Mac: `Cmd+Alt+V`) - V for Version control

#### 方法二：状态栏
- 点击状态栏的 `$(git-commit)` 图标

#### 方法三：命令面板
- 按 `Ctrl+Shift+P` (Mac: `Cmd+Shift+P`)
- 输入 `SVN/Git 自动提交: 提交更改`

#### 方法四：右键菜单
- 在文件资源管理器中右键
- 选择 `提交更改`

### 2. 上下文感知提交流程

插件现在支持智能的上下文感知提交，根据不同场景自动优化提交流程：

#### 📝 编辑器上下文提交
当在编辑器中使用快捷键 `Ctrl+Alt+V` 或从编辑器右键菜单提交时：
- 🎯 **自动选择当前文件**：如果当前编辑的文件有变更，会自动预选该文件
- 🤖 **智能生成提交信息**：根据文件类型和变更内容自动生成合适的提交信息
- ⚡ **快速提交模式**：如果只有当前文件变更，可配置跳过文件选择直接提交

#### 📁 资源管理器上下文提交
当从文件资源管理器右键菜单提交时：
- 🎯 **预选右键文件**：自动预选你右键点击的文件
- 📋 **显示相关文件**：同时显示其他变更文件供选择

#### 🎛️ 传统提交流程
从命令面板或状态栏提交时，保持原有的完整选择流程：
1. **选择文件**：在弹出的文件选择器中选择要提交的文件
2. **确认提交信息**：查看或修改自动生成的提交信息
3. **执行提交**：点击确认，插件自动执行提交

### 3. 更新/拉取

- **SVN 项目**：执行 `svn update`
- **Git 项目**：执行 `git pull`

### 4. 查看历史记录

- 点击状态栏的 `$(history)` 图标
- 或使用命令面板：`SVN/Git 自动提交: 查看历史`
- 历史记录会在输出面板中显示

### 5. 冲突解决

当检测到冲突时，状态栏会显示 `$(alert)` 图标：

1. 点击主状态栏图标，选择 `解决冲突`
2. 选择冲突文件
3. 选择解决方式：
   - **使用我的版本**：保留本地修改
   - **使用他们的版本**：使用远程版本
   - **手动解决**：打开文件进行手动合并

## ⚙️ 高级配置

### 1. SVN 特定配置

```json
{
  "svn-auto-commit.svn.path": "svn",
  "svn-auto-commit.svn.username": "your_username",
  "svn-auto-commit.svn.password": "your_password",
  "svn-auto-commit.svn.autoUpdate": true,
  "svn-auto-commit.svn.addUnversioned": false,
  "svn-auto-commit.svn.ignoreExternals": true
}
```

| 配置项 | 说明 | 默认值 |
|--------|------|--------|
| `svn.path` | SVN 命令路径 | `"svn"` |
| `svn.username` | SVN 用户名 | `""` |
| `svn.password` | SVN 密码（加密存储） | `""` |
| `svn.autoUpdate` | 提交前是否自动更新 | `true` |
| `svn.addUnversioned` | 是否自动添加未版本化文件 | `false` |
| `svn.ignoreExternals` | 是否忽略外部定义 | `true` |

### 2. Git 特定配置

```json
{
  "svn-auto-commit.git.path": "git",
  "svn-auto-commit.git.username": "your_username",
  "svn-auto-commit.git.email": "your@email.com",
  "svn-auto-commit.git.autoPull": true,
  "svn-auto-commit.git.autoPush": false,
  "svn-auto-commit.git.addAll": false
}
```

| 配置项 | 说明 | 默认值 |
|--------|------|--------|
| `git.path` | Git 命令路径 | `"git"` |
| `git.username` | Git 用户名 | `""` |
| `git.email` | Git 邮箱 | `""` |
| `git.autoPull` | 提交前是否自动拉取 | `true` |
| `git.autoPush` | 提交后是否自动推送 | `false` |
| `git.addAll` | 是否自动添加所有变更 | `false` |

### 3. 自动提交配置

```json
{
  "svn-auto-commit.autoCommit.enabled": false,
  "svn-auto-commit.autoCommit.delay": 30,
  "svn-auto-commit.autoCommit.showNotification": true,
  "svn-auto-commit.autoCommit.messageTemplate": "自动提交: {fileList} - {datetime}",
  "svn-auto-commit.autoCommit.ignorePatterns": [
    "**/.git/**",
    "**/node_modules/**",
    "**/.svn/**",
    "**/*.log",
    "**/dist/**",
    "**/build/**"
  ]
}
```

| 配置项 | 说明 | 默认值 |
|--------|------|--------|
| `autoCommit.enabled` | 是否启用自动提交 | `false` |
| `autoCommit.delay` | 文件变更后的延迟时间（秒） | `30` |
| `autoCommit.showNotification` | 是否显示提交通知 | `true` |
| `autoCommit.messageTemplate` | 自动提交信息模板 | `""` |
| `autoCommit.ignorePatterns` | 忽略的文件模式 | 见上表 |

### 4. 上下文感知提交配置

```json
{
  "svn-auto-commit.contextAware.enabled": true,
  "svn-auto-commit.contextAware.autoSelectCurrentFile": true,
  "svn-auto-commit.contextAware.autoGenerateMessage": true,
  "svn-auto-commit.contextAware.skipFileSelection": false
}
```

| 配置项 | 说明 | 默认值 |
|--------|------|--------|
| `contextAware.enabled` | 是否启用上下文感知提交 | `true` |
| `contextAware.autoSelectCurrentFile` | 在编辑器中提交时是否自动选择当前文件 | `true` |
| `contextAware.autoGenerateMessage` | 是否自动生成提交信息 | `true` |
| `contextAware.skipFileSelection` | 当只有当前文件变更时是否跳过文件选择 | `false` |

### 5. 提交信息模板配置

```json
{
  "svn-auto-commit.commit.template": "更新 {fileList}",
  "svn-auto-commit.commit.username": "开发者姓名",
  "svn-auto-commit.commit.validateMessage": false,
  "svn-auto-commit.commit.minLength": 5,
  "svn-auto-commit.commit.maxLength": 100,
  "svn-auto-commit.commit.requirePrefix": false,
  "svn-auto-commit.commit.allowedPrefixes": [
    "feat", "fix", "docs", "style", "refactor", "perf", "test", "chore", "revert"
  ]
}
```

#### 模板变量

| 变量 | 说明 | 示例 |
|------|------|------|
| `{date}` | 当前日期 | `2023-09-13` |
| `{time}` | 当前时间 | `14:30:45` |
| `{datetime}` | 日期和时间 | `2023-09-13 14:30:45` |
| `{username}` | 用户名 | `张三` |
| `{fileCount}` | 变更文件数量 | `3` |
| `{fileList}` | 变更文件列表 | `index.js, style.css` |
| `{changeType}` | 变更类型（自动检测） | `修改`, `配置`, `文档`, `样式` |

#### 智能变更类型检测

插件会根据文件扩展名自动检测变更类型：

| 文件类型 | 变更类型 | 示例文件 |
|----------|----------|----------|
| 代码文件 | `修改` | `.ts`, `.js`, `.py`, `.java` |
| 配置文件 | `配置` | `.json`, `.yml`, `.xml` |
| 文档文件 | `文档` | `.md`, `.txt`, `.doc` |
| 样式文件 | `样式` | `.css`, `.scss`, `.less` |
| 混合类型 | `功能和样式` | 同时包含代码和样式文件 |

### 6. 项目级配置

在项目根目录创建 `.svn-auto-commit.json` 文件：

```json
{
  "vcs": "svn",
  "username": "project-user",
  "commitTemplate": "[{type}] {message} - {username} ({date})",
  "autoCommitEnabled": true,
  "autoCommitInterval": 60,
  "ignorePatterns": [
    "*.log",
    "node_modules/",
    "dist/",
    ".env"
  ]
}
```

## 💡 使用示例

### 示例 1：基本提交流程

1. 修改一些文件
2. 按 `Ctrl+Alt+V` (V for Version control)
3. 在文件选择器中选择要提交的文件
4. 输入提交信息：`修复登录页面样式问题`
5. 按回车确认提交

### 示例 2：使用提交信息模板

**配置模板**：
```json
{
  "svn-auto-commit.commit.template": "[修复] {message} - {username} ({date})"
}
```

**实际效果**：
```
[修复] 登录页面样式问题 - 张三 (2023-09-13)
```

### 示例 3：启用自动提交

**配置**：
```json
{
  "svn-auto-commit.autoCommit.enabled": true,
  "svn-auto-commit.autoCommit.delay": 60,
  "svn-auto-commit.autoCommit.messageTemplate": "自动提交: {fileList} ({datetime})"
}
```

**效果**：文件修改后 60 秒自动提交，提交信息如：
```
自动提交: index.js, style.css (2023-09-13 14:30:45)
```

### 示例 4：上下文感知提交

**场景**：正在编辑 `src/components/Button.tsx` 文件

1. **修改文件后按 `Ctrl+Alt+V`**
2. **插件自动检测**：
   - 当前文件：`Button.tsx`
   - 变更类型：`修改`（TypeScript 代码文件）
3. **自动生成提交信息**：`修改 Button.tsx`
4. **如果启用自动生成**：直接提交，无需手动输入

**配置**：
```json
{
  "svn-auto-commit.contextAware.enabled": true,
  "svn-auto-commit.contextAware.autoSelectCurrentFile": true,
  "svn-auto-commit.contextAware.autoGenerateMessage": true,
  "svn-auto-commit.commit.template": "{changeType} {fileList}"
}
```

### 示例 5：智能提交信息生成

**不同文件类型的自动提交信息**：

| 修改文件 | 生成的提交信息 |
|----------|----------------|
| `README.md` | `文档 README.md` |
| `package.json` | `配置 package.json` |
| `style.css` | `样式 style.css` |
| `index.js, style.css` | `功能和样式 index.js, style.css` |
| `utils.ts, helper.ts, main.ts` | `功能 utils.ts, helper.ts 等3个文件` |

### 示例 6：团队项目配置

**项目配置文件** (`.svn-auto-commit.json`)：
```json
{
  "vcs": "git",
  "contextAware": {
    "enabled": true,
    "autoSelectCurrentFile": true,
    "autoGenerateMessage": true,
    "skipFileSelection": true
  },
  "commit": {
    "template": "[{changeType}] {fileList} - {username}",
    "username": "团队开发者",
    "validateMessage": true,
    "minLength": 10
  }
}
```

## 🎯 使用技巧

### 菜单快捷操作
- **编辑器标题栏**: 最快速的单文件操作方式
- **右键菜单**: 上下文相关的智能操作
- **源代码管理面板**: 全局版本控制操作
- **状态栏**: 常用功能的快捷入口

### 提交信息模板变量
- `{date}` - 日期：2023-09-13
- `{time}` - 时间：14:30:45
- `{datetime}` - 日期时间：2023-09-13 14:30:45
- `{username}` - 用户名
- `{fileCount}` - 文件数量
- `{fileList}` - 文件列表

### 项目级配置
在项目根目录创建 `.svn-auto-commit.json`：

```json
{
  "vcs": "git",
  "commitTemplate": "[{type}] {message} - {username}",
  "autoCommitEnabled": false,
  "ignorePatterns": ["*.log", "node_modules/", "dist/"]
}
```

## 🔧 故障排除

### 🔍 诊断工具

#### 1. 检查插件状态
- 打开 VSCode 命令面板 (`Ctrl+Shift+P`)
- 输入 `Developer: Reload Window` 重新加载窗口
- 检查状态栏是否显示插件图标

#### 2. 查看日志信息
- 打开 VSCode 输出面板 (`Ctrl+Shift+U`)
- 选择 `SVN/Git 自动提交` 输出通道
- 查看详细的错误信息和调试日志

#### 3. 检查配置
```bash
# 在 VSCode 设置中搜索
svn-auto-commit
```

### 🚨 常见问题及解决方案

#### 问题 1: 插件无法启动

**症状**：
- 状态栏没有显示插件图标
- 命令面板中找不到相关命令

**可能原因**：
- 插件未正确安装
- VSCode 版本不兼容
- 插件被禁用

**解决方案**：
```bash
# 1. 重新编译插件
npm run compile

# 2. 检查编译是否成功
ls -la dist/

# 3. 重启 VSCode 调试模式
# 按 F5 或使用命令面板 "Debug: Start Debugging"
```

#### 问题 2: SVN提交失败 - ignore-externals选项错误

**症状**：
```
SVN提交失败: Subcommand 'commit' doesn't accept option '--ignore-externals'
Type 'svn help commit' for usage.
```

**原因**：
- `--ignore-externals` 选项不适用于 `svn commit` 命令
- 该选项应该用于 `svn update` 命令

**解决方案**：
1. **自动修复**：插件已修复此问题，更新到最新版本即可
2. **手动检查配置**：
   ```json
   {
     "svn-auto-commit.svn.ignoreExternals": true
   }
   ```
   此配置现在只会影响 `svn update` 命令，不会影响 `svn commit`

#### 问题 3: SVN认证失败

**症状**：
```
SVN更新失败: svn: E170013: Unable to connect to a repository at URL 'svn://8.140.171.106:15518/lwxt'
svn: E170001: Can't get username or password
```

**原因**：
- SVN服务器需要用户名和密码认证
- 插件未配置或未正确存储认证信息

**解决方案**：

1. **使用插件内置认证设置**：
   - 打开命令面板 (`Ctrl+Shift+P`)
   - 输入 `SVN/Git 自动提交: 设置SVN认证`
   - 按提示输入用户名和密码

2. **通过主菜单设置**：
   - 点击状态栏的SVN图标
   - 选择 `设置SVN认证`
   - 输入认证信息

3. **手动配置**：
   ```json
   {
     "svn-auto-commit.svn.username": "your_username"
   }
   ```
   密码会安全存储在系统凭证管理器中

4. **验证认证**：
   ```bash
   # 在终端中测试SVN连接
   svn info svn://8.140.171.106:15518/lwxt --username your_username
   ```

#### 问题 4: 无法检测版本控制系统

**症状**：
- 状态栏显示 "未检测到版本控制"
- 无法执行提交操作

**诊断步骤**：
```bash
# 检查项目根目录
ls -la | grep -E "\.(git|svn)"

# 检查 Git 状态
git status

# 检查 SVN 状态  
svn status
```

**解决方案**：
1. **确保项目已初始化版本控制**：
   ```bash
   # Git 项目
   git init
   
   # SVN 项目
   svn checkout <repository-url> .
   ```

2. **手动设置版本控制系统**：
   ```json
   {
     "svn-auto-commit.defaultVCS": "git",  // 或 "svn"
     "svn-auto-commit.autoDetect": false
   }
   ```

#### 问题 5: SVN/Git 命令不可用

**症状**：
- 提示 "SVN命令不可用" 或 "Git命令不可用"
- 执行操作时出现命令错误

**诊断步骤**：
```bash
# 检查命令是否存在
which svn
which git

# 检查版本
svn --version
git --version

# 检查 PATH 环境变量
echo $PATH
```

**解决方案**：
1. **安装缺失的工具**：
   ```bash
   # macOS
   brew install git
   brew install subversion
   
   # Ubuntu/Debian
   sudo apt-get install git subversion
   
   # CentOS/RHEL
   sudo yum install git subversion
   ```

2. **设置正确的命令路径**：
   ```json
   {
     "svn-auto-commit.svn.path": "/usr/local/bin/svn",
     "svn-auto-commit.git.path": "/usr/local/bin/git"
   }
   ```

#### 问题 6: 认证失败

**症状**：
- 提交时提示用户名或密码错误
- SVN 操作需要重复输入密码

**解决方案**：
1. **配置用户凭证**：
   ```json
   {
     "svn-auto-commit.svn.username": "your_username",
     "svn-auto-commit.svn.password": "your_password",
     "svn-auto-commit.git.username": "your_username",
     "svn-auto-commit.git.email": "your@email.com"
   }
   ```

2. **使用系统凭证管理器**：
   - 插件会自动将密码加密存储在系统凭证管理器中
   - 首次输入后会自动保存

3. **Git SSH 密钥配置**：
   ```bash
   # 生成 SSH 密钥
   ssh-keygen -t rsa -b 4096 -C "your@email.com"
   
   # 添加到 SSH 代理
   ssh-add ~/.ssh/id_rsa
   
   # 将公钥添加到 Git 服务器
   cat ~/.ssh/id_rsa.pub
   ```

#### 问题 7: 提交失败

**症状**：
- 提交操作执行后显示失败
- 文件没有被正确提交

**诊断步骤**：
```bash
# 检查工作区状态
git status
svn status

# 检查是否有冲突
git diff
svn diff

# 检查网络连接
ping github.com
ping your-svn-server.com
```

**解决方案**：
1. **解决文件冲突**：
   - 使用插件的冲突解决功能
   - 或手动解决冲突后重新提交

2. **检查文件权限**：
   ```bash
   # 检查文件权限
   ls -la
   
   # 修复权限问题
   chmod 644 filename
   ```

3. **清理工作区**：
   ```bash
   # Git
   git clean -fd
   git reset --hard HEAD
   
   # SVN
   svn cleanup
   svn revert -R .
   ```

#### 问题 8: 自动提交不工作

**症状**：
- 启用自动提交但没有自动执行
- 文件修改后没有触发提交

**诊断步骤**：
1. **检查配置**：
   ```json
   {
     "svn-auto-commit.autoCommit.enabled": true,
     "svn-auto-commit.autoCommit.delay": 30
   }
   ```

2. **检查忽略模式**：
   ```json
   {
     "svn-auto-commit.autoCommit.ignorePatterns": [
       "**/.git/**",
       "**/node_modules/**"
     ]
   }
   ```

**解决方案**：
1. **调整延迟时间**：
   - 设置合理的延迟时间（建议 30-60 秒）
   - 避免设置过短的延迟时间

2. **检查文件监控**：
   - 确认修改的文件不在忽略列表中
   - 检查文件路径是否正确

#### 问题 9: 性能问题

**症状**：
- VSCode 响应缓慢
- 插件操作耗时过长

**解决方案**：
1. **优化忽略模式**：
   ```json
   {
     "svn-auto-commit.autoCommit.ignorePatterns": [
       "**/node_modules/**",
       "**/dist/**",
       "**/build/**",
       "**/.git/**",
       "**/.svn/**"
     ]
   }
   ```

2. **调整自动提交设置**：
   ```json
   {
     "svn-auto-commit.autoCommit.delay": 60,
     "svn-auto-commit.autoCommit.enabled": false
   }
   ```

3. **禁用不必要的功能**：
   ```json
   {
     "svn-auto-commit.statusBar.enabled": false,
     "svn-auto-commit.autoCommit.showNotification": false
   }
   ```

### 🛠️ 高级故障排除

#### 1. 重置插件配置

```json
{
  "svn-auto-commit.enabled": true,
  "svn-auto-commit.defaultVCS": "auto",
  "svn-auto-commit.autoDetect": true,
  "svn-auto-commit.showStatusBar": true,
  "svn-auto-commit.confirmBeforeCommit": true
}
```

#### 2. 清理插件数据

```bash
# 删除编译文件
rm -rf dist/

# 重新安装依赖
rm -rf node_modules/
npm install

# 重新编译
npm run compile
```

#### 3. 调试模式

1. 在 VSCode 中打开项目
2. 按 `F5` 启动调试模式
3. 在新窗口中测试插件功能
4. 查看调试控制台的输出信息

#### 4. 日志收集

```bash
# 启用详细日志
export DEBUG=svn-auto-commit:*

# 运行 VSCode
code .
```

### 📞 获取帮助

#### 1. 收集诊断信息

在报告问题时，请提供以下信息：

```bash
# 系统信息
uname -a

# VSCode 版本
code --version

# Node.js 版本
node --version
npm --version

# Git/SVN 版本
git --version
svn --version

# 插件版本
# 在 package.json 中查看
```

#### 2. 错误日志

- VSCode 输出面板的完整错误信息
- 终端中的错误输出
- 系统日志相关信息

#### 3. 配置信息

- VSCode 设置中的插件配置
- 项目级配置文件内容
- 环境变量设置

### 🔄 常见修复流程

#### 完全重置流程

```bash
# 1. 停止 VSCode
# 2. 清理项目
rm -rf dist/ node_modules/

# 3. 重新安装
npm install

# 4. 重新编译
npm run compile

# 5. 重置配置
# 在 VSCode 设置中删除所有 svn-auto-commit 相关配置

# 6. 重启 VSCode 并重新配置
```

#### 快速诊断命令

```bash
# 一键诊断脚本
echo "=== 系统信息 ==="
uname -a
echo "=== VSCode 版本 ==="
code --version
echo "=== Git 状态 ==="
git --version && git status
echo "=== SVN 状态 ==="
svn --version && svn status
echo "=== 项目文件 ==="
ls -la | grep -E "\.(git|svn)"
echo "=== 插件文件 ==="
ls -la dist/
```

## ❓ 常见问题

### Q1: 插件支持哪些版本控制系统？
A1: 目前支持 SVN 和 Git 两种主流版本控制系统，可以自动检测或手动设置。

### Q2: 可以同时在一个项目中使用 SVN 和 Git 吗？
A2: 插件会优先检测 Git，如果同时存在两种版本控制系统，建议手动设置 `defaultVCS`。

### Q3: 自动提交会不会造成垃圾提交？
A3: 插件提供了延迟机制和忽略模式，可以避免频繁的无意义提交。建议合理配置延迟时间和忽略模式。

### Q4: 提交信息模板支持哪些变量？
A4: 支持日期、时间、用户名、文件列表等多种变量，详见[模板变量](#模板变量)部分。

### Q5: 如何在团队中统一配置？
A5: 可以在项目根目录创建 `.svn-auto-commit.json` 文件，团队成员的项目级配置会覆盖个人全局配置。

### Q6: 插件会存储密码吗？安全吗？
A6: 插件使用系统的 keytar 库安全存储凭证，密码会加密保存在系统凭证管理器中。

### Q7: 如何禁用某些文件的自动提交？
A7: 在 `autoCommit.ignorePatterns` 中添加文件模式，如 `"**/*.log"` 忽略所有日志文件。

### Q8: 插件支持多工作区吗？
A8: 目前主要支持单工作区，多工作区环境下会使用第一个工作区的配置。

### Q9: 状态栏不显示图标？
A9: 检查设置中的 `showStatusBar` 是否为 `true`

### Q10: 提示命令不可用？
A10: 确保系统已安装 SVN/Git，并在 PATH 中

### Q11: 自动提交不工作？
A11: 检查 `autoCommit.enabled` 设置和 `ignorePatterns` 配置

### Q12: 如何解决冲突？
A12: 点击状态栏主图标，选择"解决冲突"，然后选择解决方式

---

## 📞 技术支持

如果遇到问题或有功能建议，请：

1. 查看本文档的故障排除部分
2. 检查 VSCode 输出面板的错误信息
3. 提交 Issue 到项目仓库：https://github.com/QINGYUAI/svn-auto-vscode/issues

---

**版本**: v0.1.1  
**更新时间**: 2025-01-13  
**兼容性**: VSCode 1.73.0+
