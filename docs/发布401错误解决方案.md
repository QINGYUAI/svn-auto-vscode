# ğŸ”§ å‘å¸ƒæ—¶ 401 é”™è¯¯è§£å†³æ–¹æ¡ˆ

## âŒ é”™è¯¯ä¿¡æ¯

```
INFO  Publishing 'QINGYUAI.svn-git-auto-commit v0.2.0'...
ERROR  Failed request: (401)
```

## ğŸ” é—®é¢˜åˆ†æ

401 é”™è¯¯è¡¨ç¤º**è®¤è¯å¤±è´¥**ã€‚è™½ç„¶ `vsce login` æˆåŠŸï¼Œä½†å‘å¸ƒæ—¶ä»ç„¶å¤±è´¥ï¼Œå¯èƒ½çš„åŸå› ï¼š

1. **Token æƒé™ä¸è¶³** - ç™»å½•åªéœ€è¦åŸºæœ¬æƒé™ï¼Œä½†å‘å¸ƒéœ€è¦ `Marketplace: Manage` æƒé™
2. **Token å·²è¿‡æœŸ** - Token å¯èƒ½åœ¨ä½¿ç”¨è¿‡ç¨‹ä¸­è¿‡æœŸ
3. **Publisher æƒé™é—®é¢˜** - Publisher å¯èƒ½æ²¡æœ‰å‘å¸ƒæƒé™
4. **Token ç¼“å­˜é—®é¢˜** - æ—§çš„ Token å¯èƒ½è¢«ç¼“å­˜

## âœ… è§£å†³æ–¹æ¡ˆ

### æ–¹æ¡ˆ 1: é‡æ–°åˆ›å»º Tokenï¼ˆæ¨èï¼‰

1. **è®¿é—® Token ç®¡ç†é¡µé¢**ï¼š
   ```
   https://dev.azure.com/{ç»„ç»‡åç§°}/_usersSettings/tokens
   ```
   å¦‚æœç»„ç»‡åç§°æ˜¯ `QINGYUAI`ï¼Œè®¿é—®ï¼š
   ```
   https://dev.azure.com/QINGYUAI/_usersSettings/tokens
   ```

2. **åˆ é™¤æ—§ Token**

3. **åˆ›å»ºæ–° Token**ï¼Œç¡®ä¿å‹¾é€‰ï¼š
   ```
   â˜‘ Marketplace (Manage)          # å¿…éœ€ï¼šå‘å¸ƒæ‰©å±•
   â˜‘ User Profile (Read)            # å¿…éœ€ï¼šéªŒè¯ç”¨æˆ·
   â˜‘ Organization (Read)            # æ¨è
   ```

4. **é‡æ–°ç™»å½•**ï¼š
   ```bash
   vsce logout QINGYUAI
   vsce login QINGYUAI
   # ç²˜è´´æ–° Token
   ```

5. **éªŒè¯æƒé™**ï¼š
   ```bash
   vsce verify-pat QINGYUAI
   ```

6. **é‡æ–°å‘å¸ƒ**ï¼š
   ```bash
   vsce publish
   ```

### æ–¹æ¡ˆ 2: æ£€æŸ¥ Publisher æƒé™

1. **è®¿é—® Publisher ç®¡ç†é¡µé¢**ï¼š
   ```
   https://marketplace.visualstudio.com/manage/publishers/QINGYUAI
   ```

2. **æ£€æŸ¥ Publisher çŠ¶æ€**ï¼š
   - ç¡®è®¤ Publisher å·²åˆ›å»º
   - ç¡®è®¤ Publisher å¤„äºæ´»åŠ¨çŠ¶æ€
   - æ£€æŸ¥æ˜¯å¦æœ‰ä»»ä½•é™åˆ¶

### æ–¹æ¡ˆ 3: ä½¿ç”¨ç¯å¢ƒå˜é‡è®¾ç½® Token

å¦‚æœç™»å½•æœ‰é—®é¢˜ï¼Œå¯ä»¥å°è¯•ä½¿ç”¨ç¯å¢ƒå˜é‡ï¼š

```powershell
# Windows PowerShell
$env:VSCE_PAT="ä½ çš„Token"
vsce publish
```

```bash
# Linux/Mac
export VSCE_PAT="ä½ çš„Token"
vsce publish
```

### æ–¹æ¡ˆ 4: æ¸…é™¤ç¼“å­˜å¹¶é‡æ–°ç™»å½•

```bash
# ç™»å‡º
vsce logout QINGYUAI

# æ¸…é™¤ vsce ç¼“å­˜ï¼ˆå¦‚æœå­˜åœ¨ï¼‰
# Windows: åˆ é™¤ %USERPROFILE%\.vsce
# Linux/Mac: åˆ é™¤ ~/.vsce

# é‡æ–°ç™»å½•
vsce login QINGYUAI
```

## ğŸ” è¯Šæ–­æ­¥éª¤

### æ­¥éª¤ 1: éªŒè¯ Token æƒé™

```bash
vsce verify-pat QINGYUAI
```

**æœŸæœ›è¾“å‡º**ï¼š
```
The Personal Access Token verification succeeded for the publisher 'QINGYUAI'.
```

å¦‚æœå¤±è´¥ï¼Œè¯´æ˜ Token æƒé™ä¸è¶³ã€‚

### æ­¥éª¤ 2: æ£€æŸ¥ Publisher

è®¿é—®ï¼šhttps://marketplace.visualstudio.com/manage/publishers

ç¡®è®¤ `QINGYUAI` å­˜åœ¨ä¸”çŠ¶æ€æ­£å¸¸ã€‚

### æ­¥éª¤ 3: å°è¯•æ‰“åŒ…ï¼ˆä¸å‘å¸ƒï¼‰

```bash
vsce package
```

å¦‚æœæ‰“åŒ…æˆåŠŸï¼Œè¯´æ˜é…ç½®æ­£ç¡®ï¼Œé—®é¢˜åœ¨å‘å¸ƒæƒé™ã€‚

### æ­¥éª¤ 4: æ£€æŸ¥ç‰ˆæœ¬å·

ç¡®ä¿ç‰ˆæœ¬å·æ˜¯æ–°çš„ï¼Œä¸èƒ½å‘å¸ƒå·²å­˜åœ¨çš„ç‰ˆæœ¬ï¼š

```bash
# æ£€æŸ¥å½“å‰ç‰ˆæœ¬
cat package.json | grep version

# å¦‚æœç‰ˆæœ¬å·²å­˜åœ¨ï¼Œæ›´æ–°ç‰ˆæœ¬å·
```

## ğŸ“‹ å®Œæ•´æ£€æŸ¥æ¸…å•

å‘å¸ƒå‰ç¡®è®¤ï¼š

- [ ] Token æœ‰ `Marketplace: Manage` æƒé™
- [ ] Token æœ‰ `User Profile: Read` æƒé™
- [ ] Token æœªè¿‡æœŸ
- [ ] Publisher å·²åˆ›å»ºä¸”çŠ¶æ€æ­£å¸¸
- [ ] `package.json` ä¸­çš„ `publisher` ä¸ç™»å½•çš„ä¸€è‡´
- [ ] ç‰ˆæœ¬å·æ˜¯æ–°çš„ï¼ˆæœªå‘å¸ƒè¿‡ï¼‰
- [ ] `vsce verify-pat` éªŒè¯æˆåŠŸ

## ğŸš€ å¿«é€Ÿä¿®å¤å‘½ä»¤

```bash
# 1. ç™»å‡º
vsce logout QINGYUAI

# 2. é‡æ–°ç™»å½•ï¼ˆä½¿ç”¨æ–° Tokenï¼‰
vsce login QINGYUAI

# 3. éªŒè¯æƒé™
vsce verify-pat QINGYUAI

# 4. å‘å¸ƒ
vsce publish
```

## ğŸ”— ç›¸å…³é“¾æ¥

- [Token è®¾ç½®æŒ‡å—](./Tokenè®¾ç½®æŒ‡å—.md)
- [æƒé™é”™è¯¯è§£å†³æ–¹æ¡ˆ](./æƒé™é”™è¯¯è§£å†³æ–¹æ¡ˆ.md)
- [æ‰“åŒ…å‘å¸ƒæµç¨‹](./æ‰“åŒ…å‘å¸ƒæµç¨‹.md)
- [Azure DevOps Token ç®¡ç†](https://dev.azure.com/QINGYUAI/_usersSettings/tokens)
- [VSCode Marketplace ç®¡ç†](https://marketplace.visualstudio.com/manage)

---

**æœ€åæ›´æ–°**: 2025-11-20



