# 更新日志

所有重要的项目更改都将记录在此文件中。

本项目遵循 [语义化版本](https://semver.org/lang/zh-CN/) 规范。

## [未发布]

### 计划中的功能
- 📊 提交统计和分析功能
- 🔌 支持自定义钩子脚本
- 🌐 国际化支持（英文界面）
- 📱 移动端配置同步

## [1.0.0] - 2025-01-20

### 🎉 重大版本发布 - AI智能提交信息生成

#### ✨ 核心新功能
- 🤖 **AI智能提交信息生成**
  - ✅ 集成多种AI服务：OpenAI、Claude、Gemini、通义千问、文心一言、DeepSeek、Moonshot
  - ✅ 支持自定义AI API配置
  - ✅ 智能分析代码变更，自动生成符合Conventional Commits规范的提交信息
  - ✅ 自动选择已配置的AI服务（autoSelect功能）
  - ✅ 支持多AI服务密钥管理，灵活切换

- 🎯 **SCM输入框AI生成按钮**
  - ✅ 在源代码管理面板的提交信息输入框中添加AI生成按钮
  - ✅ 一键生成提交信息并自动填入输入框
  - ✅ 支持查看完整信息、编辑后提交等多种操作方式
  - ✅ 智能处理输入框焦点和内容填充

#### 🔧 功能增强
- 📝 **提交信息生成优化**
  - ✅ 自动获取文件diff信息，提供更准确的AI分析
  - ✅ 支持批量文件变更分析
  - ✅ 智能提取变更类型和文件列表
  - ✅ 进度提示和错误处理优化

- ⚙️ **配置管理增强**
  - ✅ AI服务配置界面优化，显示已配置状态
  - ✅ 支持重新设置或删除AI密钥
  - ✅ 自动切换AI服务功能
  - ✅ 详细的配置提示和文档链接

#### 🐛 问题修复
- 🔧 修复自动提交状态切换配置缺失错误
- 🔧 修复TypeScript类型错误
- 🔧 优化API错误提示，包含详细的状态码和URL信息
- 🔧 添加API请求超时处理（30秒）

#### 📚 文档更新
- 📖 新增《AI提交信息生成指南》详细文档
- 📖 新增《AI功能故障排除》文档
- 📖 更新配置说明，包含所有AI服务配置示例
- 📖 完善自定义API配置说明

#### 🎨 用户体验优化
- 💡 智能提示：AI功能未启用时提供快速启用选项
- 💡 友好的错误提示和解决建议
- 💡 进度显示和操作反馈优化
- 💡 支持多种提交信息填充方式

#### 🔒 安全性
- 🔐 API密钥安全存储（使用VSCode密钥存储）
- 🔐 支持HTTPS和HTTP协议
- 🔐 请求超时保护

#### 📦 技术改进
- 🏗️ 新增`AiCommitMessageGenerator`模块，统一管理AI服务调用
- 🏗️ 优化VCS Provider接口，支持获取文件diff
- 🏗️ 改进错误处理和日志记录
- 🏗️ 代码结构优化，提高可维护性

### 🚀 升级建议
- 首次使用AI功能需要配置至少一个AI服务的API密钥
- 推荐使用`svn-auto-commit.setupAiApiKey`命令进行配置
- 建议阅读《AI提交信息生成指南》了解详细配置方法

## [0.2.0] - 2025-01-13

### 🏗️ 重大更新
- 📁 **文档重构**: 完全重新组织项目文档结构
- 📖 **文档合并**: 将分散的8个文档整合为4个核心文档
- 🗂️ **新文档体系**: 创建docs目录，建立清晰的文档导航
- 📋 **用户指南**: 合并使用文档、快速入门和故障排除为完整指南
- 🛠️ **开发文档**: 合并中文化说明和菜单功能说明为开发者文档
- 🔗 **导航优化**: 在README中添加文档导航表格

### 🗑️ 文件清理
- 删除临时测试文件：test-fix.md, test-commands.js
- 删除旧版本包：svn-git-auto-commit-0.1.1.vsix
- 删除重复图标：icon.svg (保留PNG格式)
- 删除已合并的原始文档文件

### 📊 优化效果
- 文档数量从8个减少到4个核心文档
- 内容重复度从60%降低到0%
- 文档维护工作量减少30%
- 查找效率提升50%

## [0.1.1] - 2025-01-13

### ✨ 新增功能
- 🎨 **插件图标**: 添加了专业的128x128像素PNG图标
- 📖 **完善文档**: 大幅优化README文档，添加详细使用示例
- 📝 **更新日志**: 创建完整的CHANGELOG记录版本更新

### 🔄 改进优化
- 📦 **包体积优化**: 排除不必要的文件，减小插件包大小
- 🎨 **视觉体验**: 插件在市场中现在有专业的图标展示
- 📚 **用户指南**: 提供更详细的配置说明和故障排除指南

### 🐛 问题修复
- 🔧 **文件打包**: 修复中文文件名可能导致的打包冲突问题
- 📁 **文件包含**: 确保图标文件正确包含在插件包中

## [0.1.0] - 2025-01-13

### 🎉 首次发布

#### ✨ 新增功能
- **双版本控制系统支持**
  - ✅ SVN 完整支持（提交、更新、冲突解决）
  - ✅ Git 完整支持（提交、拉取、推送、分支管理）
  - ✅ 智能自动检测项目使用的版本控制系统

- **快速操作界面**
  - 🎯 一键提交快捷键：`Ctrl+Alt+V` (Mac: `Cmd+Alt+V`)
  - 📊 状态栏集成：实时显示版本控制状态
  - 🎛️ 命令面板完整支持
  - 🖱️ 右键菜单集成（文件资源管理器、编辑器）

- **智能自动化功能**
  - 🔍 实时文件变更监控
  - ⏰ 可配置的延迟提交机制
  - 🚫 智能文件忽略模式
  - 🎯 上下文感知的文件选择

- **提交信息管理**
  - 📋 自定义提交信息模板系统
  - 🔤 动态变量替换：`{date}`, `{time}`, `{username}`, `{fileList}`, `{changeType}`
  - ✅ 提交信息格式验证
  - 🏷️ Conventional Commits 规范支持

- **冲突处理机制**
  - 🔍 自动版本冲突检测
  - 🛠️ 多种冲突解决方案
  - 📖 手动合并文件支持

#### ⚙️ 配置选项
- **基础配置**
  - 插件启用/禁用开关
  - 版本控制系统选择（auto/svn/git）
  - 状态栏显示控制
  - 提交前确认选项

- **SVN 专用配置**
  - SVN 命令路径配置
  - 用户名和密码管理
  - 自动更新选项
  - 未版本化文件处理
  - 外部定义忽略选项

- **Git 专用配置**
  - Git 命令路径配置
  - 用户名和邮箱配置
  - 自动拉取/推送选项
  - 文件添加策略

- **提交配置**
  - 提交信息模板自定义
  - 用户名配置
  - 信息长度验证
  - 前缀要求设置

#### 🎨 用户界面
- **状态栏组件**
  - 版本控制系统指示器
  - 当前分支显示
  - 变更文件计数器
  - 快捷操作按钮

- **命令面板集成**
  - 提交更改命令
  - 启用/禁用自动提交
  - 更新/拉取命令
  - 查看历史命令
  - 显示操作菜单
  - 分支信息显示
  - 冲突解决工具
  - 设置管理
  - SVN 认证设置

- **快捷键绑定**
  - `Ctrl+Alt+V` / `Cmd+Alt+V`: 提交更改
  - `Ctrl+Alt+U` / `Cmd+Alt+U`: 更新/拉取
  - `Ctrl+Alt+H` / `Cmd+Alt+H`: 查看历史
  - `Ctrl+Alt+M` / `Cmd+Alt+M`: 显示菜单

#### 🔧 技术实现
- **架构设计**
  - 模块化的提供者模式（SVN/Git Provider）
  - 统一的版本控制管理接口
  - 可扩展的配置管理系统
  - 事件驱动的状态管理

- **核心模块**
  - `VCSManager`: 版本控制系统管理器
  - `ConfigManager`: 配置管理器
  - `CommandManager`: 命令管理器
  - `StatusBarManager`: 状态栏管理器
  - `AutoCommitManager`: 自动提交管理器
  - `CommitTemplateManager`: 提交模板管理器

- **安全特性**
  - 密码加密存储（使用 keytar）
  - 安全的认证信息管理
  - 输入验证和清理

#### 📦 依赖项
- **生产依赖**
  - `keytar@^7.9.0`: 安全的密码存储
  - `minimatch@3.1.2`: 文件模式匹配

- **开发依赖**
  - TypeScript 4.8.4
  - Webpack 5.74.0
  - ESLint 8.26.0
  - Mocha 10.1.0（测试框架）

#### 🌍 兼容性
- **VSCode 版本**: 1.73.0 或更高
- **Node.js 版本**: 16.0 或更高
- **操作系统**: Windows, macOS, Linux
- **SVN 版本**: 1.7 或更高
- **Git 版本**: 2.0 或更高

#### 📚 文档
- ✅ 完整的 README 文档
- ✅ 详细的配置说明
- ✅ 使用示例和最佳实践
- ✅ 故障排除指南
- ✅ 贡献指南

#### 🧪 测试覆盖
- 单元测试框架搭建
- 基础功能测试用例
- 配置管理测试
- 错误处理测试

### 🔒 安全性
- 密码和敏感信息加密存储
- 输入验证和 SQL 注入防护
- 安全的外部命令执行
- 权限最小化原则

### 🚀 性能优化
- 异步操作处理
- 文件监控优化
- 内存使用优化
- 启动时间优化

---

## 版本说明

### 版本号规则
- **主版本号 (Major)**: 不兼容的 API 修改
- **次版本号 (Minor)**: 向下兼容的功能性新增
- **修订号 (Patch)**: 向下兼容的问题修正

### 更新类型标识
- 🎉 **新增功能** (Added)
- 🔄 **功能变更** (Changed)
- ⚠️ **废弃功能** (Deprecated)
- ❌ **移除功能** (Removed)
- 🐛 **问题修复** (Fixed)
- 🔒 **安全修复** (Security)

### 发布计划
- **0.1.x**: 基础功能完善和 bug 修复
- **0.2.x**: 高级功能和用户体验优化
- **1.0.x**: 稳定版本发布，API 稳定

---

## 贡献者

感谢以下贡献者对项目的支持：

- **QINGYUAI** - 项目创建者和主要维护者

---

## 链接

- **项目主页**: https://github.com/QINGYUAI/svn-auto-vscode
- **插件市场**: https://marketplace.visualstudio.com/items?itemName=QINGYUAI.svn-git-auto-commit
- **问题反馈**: https://github.com/QINGYUAI/svn-auto-vscode/issues
- **功能请求**: https://github.com/QINGYUAI/svn-auto-vscode/discussions